function CanvasCarousel(a,b){function db(){eb();Gb()}function eb(){bb.width=cb.canvasWidth;bb.height=cb.canvasHeight;$(bb).css("background-color",cb.backgroundColor);m=cb.thumbWidth;n=cb.thumbHeight;o=cb.reflHeight;p=cb.reflTransparency;q=cb.thumbsAr;r=cb.nrImages;s=new Stage(bb);s.enableMouseOver(40);Touch.enable(s);t=new Container;s.addChild(t);t.x=cb.canvasWidth/2+parseInt(cb.centerX);t.y=cb.canvasHeight/2+parseInt(cb.centerY);y=cb.carouselAngle;_.src=cb.preloaderPath;_.onload=mb;if(cb.showTooltip){L=new Container;M=new Shape;N=new Text("",cb.tooltipTextSize+"px "+cb.tooltipFont,cb.tooltipTextColor);L.addChild(M);L.addChild(N);s.addChild(L);L.alpha=0}s.onMouseMove=gb}function fb(a){B=a.stageX;A=B;D=true;F=false;H=0;I=0;for(var b=0;b<r;b++){ab=q[b];Tween.removeTweens(ab);ab.tempAngle=ab.angle}s.onMouseUp=jb}function gb(a){if(cb.showTooltip){L.x=a.stageX-(N.getMeasuredWidth()+4)/2;L.y=a.stageY-(N.getMeasuredLineHeight()+4)/2-16;if(L.id!=j)Tween.get(L,{override:true}).to({alpha:0},400,Ease.cubicOut)}if(h){var b=Math.min(Math.max(a.stageX-v.x-z,0),v.width-v.handlerWidth);v.handler.x=b;var c=Math.floor(b/(v.width-v.handlerWidth)*r);if(c==r)c--;if(c!=j)Nb(c)}else if(D){E=true;lb();s.onMouseUp=hb;C=B;B=a.stageX;H=A-B;for(var d=0;d<r;d++){ab=q[d];ab.angle=ab.tempAngle+H/4}I=C-B;if(I>10)I=10;if(I<-10)I=-10}}function hb(a){if(E){E=false;D=false;G=true;if(Math.abs(I)<5){ib()}else{F=true}}}function ib(){var a=0;var b=Ob(q[0].angle)%360;for(var c=1;c<r;c++){ab=q[c];var d=Ob(ab.angle)%360;if(Math.abs(d-90)<Math.abs(b-90)){b=d;a=c}}Nb(a);G=false;setTimeout(kb,100)}function jb(a){E=false;D=false;if(G)ib()}function kb(){t.mouseEnabled=true;v.mouseEnabled=true;R.mouseEnabled=true;Q.mouseEnabled=true;S.mouseEnabled=true;if(g){tb()}}function lb(){t.mouseEnabled=false;v.mouseEnabled=false;R.mouseEnabled=false;Q.mouseEnabled=false;S.mouseEnabled=false;if(g){clearTimeout(x);Tween.get(J,{override:true}).to({transPercent:0},1e3,Ease.cubicOut)}}function mb(){u=new Bitmap(_);s.addChild(u);u.scaleX=cb.preloaderSize/_.width;u.scaleY=cb.preloaderSize/_.height;u.regX=_.width/2;u.regY=_.height/2;u.x=cb.canvasWidth/2;u.y=cb.canvasHeight/2;nb(u,cb.preloaderColor);Ticker.setFPS(40);Ticker.addListener(c)}function nb(a,b){var c=parseInt(b.substring(1,3),16);var d=parseInt(b.substring(3,5),16);var e=parseInt(b.substring(5,7),16);var f=new ColorFilter(c/255,d/255,e/255,1);a.filters=[f];a.cache(0,0,a.image.width,a.image.height)}function ob(a,b,c,d){var e=new ColorFilter(b/255,c/255,d/255,1);a.filters=[e];a.cache(0,0,a.image.width,a.image.height)}function pb(a,b,c,d,e,f){var g=new ColorFilter(a/255,b/255,c/255,1);var h=new ColorFilter(d/255,e/255,f/255,1);v.track.filters=[g];v.handlerBar.filters=[h];v.lines.filters=[g];v.track.updateCache();v.handlerBar.updateCache();v.lines.updateCache()}function qb(){T.src=cb.buttonsBackgroundPath;T.onload=function(){U.src=cb.buttonsNextIconPath;U.onload=function(){V.src=cb.buttonsPrevIconPath;V.onload=function(){W.src=cb.buttonsPlayIconPath;W.onload=function(){X.src=cb.buttonsPauseIconPath;X.onload=function(){Y.src=cb.scrollbarLinesPath;Y.onload=rb}}}}}}function rb(){f=true;if(cb.showPrevBtn){var a=new Bitmap(T);var b=new Bitmap(V);R.addChild(a);R.addChild(b);b.x=(T.width-V.width)/2;b.y=(T.height-V.height)/2;s.addChild(R);R.x=cb.prevButtonPosX;R.y=cb.prevButtonPosY;R.prevBtnBgRed=parseInt(cb.prevBtnBgColor.substring(1,3),16);R.prevBtnBgGreen=parseInt(cb.prevBtnBgColor.substring(3,5),16);R.prevBtnBgBlue=parseInt(cb.prevBtnBgColor.substring(5,7),16);R.prevBtnIcRed=parseInt(cb.prevBtnIcColor.substring(1,3),16);R.prevBtnIcGreen=parseInt(cb.prevBtnIcColor.substring(3,5),16);R.prevBtnIcBlue=parseInt(cb.prevBtnIcColor.substring(5,7),16);ob(a,R.prevBtnBgRed,R.prevBtnBgGreen,R.prevBtnBgBlue);ob(b,R.prevBtnIcRed,R.prevBtnIcGreen,R.prevBtnIcBlue);R.alpha=0;Tween.get(R).to({alpha:1},800,Ease.cubicOut).call(function(){R.onMouseOver=wb;R.onMouseOut=xb;R.onClick=function(){Nb(j+1)}})}if(cb.showNextBtn){var c=new Bitmap(T);var d=new Bitmap(U);Q.addChild(c);Q.addChild(d);d.x=(T.width-U.width)/2;d.y=(T.height-U.height)/2;s.addChild(Q);Q.x=cb.nextButtonPosX;Q.y=cb.nextButtonPosY;Q.nextBtnBgRed=parseInt(cb.nextBtnBgColor.substring(1,3),16);Q.nextBtnBgGreen=parseInt(cb.nextBtnBgColor.substring(3,5),16);Q.nextBtnBgBlue=parseInt(cb.nextBtnBgColor.substring(5,7),16);Q.nextBtnIcRed=parseInt(cb.nextBtnIcColor.substring(1,3),16);Q.nextBtnIcGreen=parseInt(cb.nextBtnIcColor.substring(3,5),16);Q.nextBtnIcBlue=parseInt(cb.nextBtnIcColor.substring(5,7),16);ob(c,Q.nextBtnBgRed,Q.nextBtnBgGreen,Q.nextBtnBgBlue);ob(d,Q.nextBtnIcRed,Q.nextBtnIcGreen,Q.nextBtnIcBlue);Q.alpha=0;Tween.get(Q).to({alpha:1},800,Ease.cubicOut).call(function(){Q.onMouseOver=yb;Q.onMouseOut=zb;Q.onClick=function(){Nb(j-1)}})}if(cb.showPlayBtn){var e=new Bitmap(T);var h=new Bitmap(W);var i=new Bitmap(X);S.addChild(e);S.addChild(h);S.addChild(i);h.x=(T.width-W.width)/2;h.y=(T.height-W.height)/2;i.x=(T.width-X.width)/2;i.y=(T.height-X.height)/2;s.addChild(S);i.visible=false;S.x=cb.playButtonPosX;S.y=cb.playButtonPosY;S.playBtnBgRed=parseInt(cb.playBtnBgColor.substring(1,3),16);S.playBtnBgGreen=parseInt(cb.playBtnBgColor.substring(3,5),16);S.playBtnBgBlue=parseInt(cb.playBtnBgColor.substring(5,7),16);S.playBtnIcRed=parseInt(cb.playBtnIcColor.substring(1,3),16);S.playBtnIcGreen=parseInt(cb.playBtnIcColor.substring(3,5),16);S.playBtnIcBlue=parseInt(cb.playBtnIcColor.substring(5,7),16);ob(e,S.playBtnBgRed,S.playBtnBgGreen,S.playBtnBgBlue);ob(h,S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);ob(i,S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);S.alpha=0;Tween.get(S).to({alpha:1},800,Ease.cubicOut).call(function(){S.onMouseOver=Ab;S.onMouseOut=Bb;S.onClick=function(){if(g){vb();S.getChildAt(1).visible=true;S.getChildAt(2).visible=false;Tween.get(w,{override:true}).to({alpha:0},800,Ease.cubicOut)}else{Tween.get(w,{override:true}).to({alpha:1},800,Ease.cubicOut);J.transPercent=0;sb();S.getChildAt(1).visible=false;S.getChildAt(2).visible=true}}})}w=new TransitionPreloader(cb);s.addChild(w);w.fillPreloader(0);w.alpha=0;if(cb.autoplay){Tween.get(w,{override:true}).to({alpha:1},500,Ease.cubicOut);J.transPercent=0;sb();S.getChildAt(1).visible=false;S.getChildAt(2).visible=true}if(cb.showScrollbar){v=new ScrollBar(cb,Y);s.addChild(v);v.trackRed=parseInt(cb.scrollbarTrackColor.substring(1,3),16);v.trackGreen=parseInt(cb.scrollbarTrackColor.substring(3,5),16);v.trackBlue=parseInt(cb.scrollbarTrackColor.substring(5,7),16);v.handlerRed=parseInt(cb.scrollbarHandlerColor.substring(1,3),16);v.handlerGreen=parseInt(cb.scrollbarHandlerColor.substring(3,5),16);v.handlerBlue=parseInt(cb.scrollbarHandlerColor.substring(5,7),16);pb(v.trackRed,v.trackGreen,v.trackBlue,v.handlerRed,v.handlerGreen,v.handlerBlue);v.alpha=0;Tween.get(v).to({alpha:1},800,Ease.cubicOut).call(function(){v.handler.onMouseOver=Cb;v.handler.onMouseOut=Db;v.handler.onPress=Eb})}if(Touch.isSupported())s.onMouseDown=fb;if(cb.mousewheel){Jb()}}function sb(){g=true;tb()}function tb(){clearTimeout(x);x=setTimeout(ub,cb.slideshowDelay);Tween.get(J,{override:true}).to({transPercent:100},cb.slideshowDelay)}function ub(){if(g){Nb(j-1);Tween.get(this).wait(1e3).call(tb);Tween.get(J,{override:true}).to({transPercent:0},1e3,Ease.cubicOut)}}function vb(){g=false;clearTimeout(x)}function wb(){$(bb).css("cursor","pointer");var a=parseInt(cb.prevBtnIcColor.substring(1,3),16);var b=parseInt(cb.prevBtnIcColor.substring(3,5),16);var c=parseInt(cb.prevBtnIcColor.substring(5,7),16);var d=parseInt(cb.prevBtnBgColor.substring(1,3),16);var e=parseInt(cb.prevBtnBgColor.substring(3,5),16);var f=parseInt(cb.prevBtnBgColor.substring(5,7),16);Tween.get(R,{override:true}).to({prevBtnBgRed:a,prevBtnBgGreen:b,prevBtnBgBlue:c,prevBtnIcRed:d,prevBtnIcGreen:e,prevBtnIcBlue:f},500,Ease.cubicOut)}function xb(){$(bb).css("cursor","default");var a=parseInt(cb.prevBtnBgColor.substring(1,3),16);var b=parseInt(cb.prevBtnBgColor.substring(3,5),16);var c=parseInt(cb.prevBtnBgColor.substring(5,7),16);var d=parseInt(cb.prevBtnIcColor.substring(1,3),16);var e=parseInt(cb.prevBtnIcColor.substring(3,5),16);var f=parseInt(cb.prevBtnIcColor.substring(5,7),16);Tween.get(R,{override:true}).to({prevBtnBgRed:a,prevBtnBgGreen:b,prevBtnBgBlue:c,prevBtnIcRed:d,prevBtnIcGreen:e,prevBtnIcBlue:f},500,Ease.cubicOut)}function yb(){$(bb).css("cursor","pointer");var a=parseInt(cb.nextBtnIcColor.substring(1,3),16);var b=parseInt(cb.nextBtnIcColor.substring(3,5),16);var c=parseInt(cb.nextBtnIcColor.substring(5,7),16);var d=parseInt(cb.nextBtnBgColor.substring(1,3),16);var e=parseInt(cb.nextBtnBgColor.substring(3,5),16);var f=parseInt(cb.nextBtnBgColor.substring(5,7),16);Tween.get(Q,{override:true}).to({nextBtnBgRed:a,nextBtnBgGreen:b,nextBtnBgBlue:c,nextBtnIcRed:d,nextBtnIcGreen:e,nextBtnIcBlue:f},500,Ease.cubicOut)}function zb(){$(bb).css("cursor","default");var a=parseInt(cb.nextBtnBgColor.substring(1,3),16);var b=parseInt(cb.nextBtnBgColor.substring(3,5),16);var c=parseInt(cb.nextBtnBgColor.substring(5,7),16);var d=parseInt(cb.nextBtnIcColor.substring(1,3),16);var e=parseInt(cb.nextBtnIcColor.substring(3,5),16);var f=parseInt(cb.nextBtnIcColor.substring(5,7),16);Tween.get(Q,{override:true}).to({nextBtnBgRed:a,nextBtnBgGreen:b,nextBtnBgBlue:c,nextBtnIcRed:d,nextBtnIcGreen:e,nextBtnIcBlue:f},500,Ease.cubicOut)}function Ab(){$(bb).css("cursor","pointer");var a=parseInt(cb.playBtnIcColor.substring(1,3),16);var b=parseInt(cb.playBtnIcColor.substring(3,5),16);var c=parseInt(cb.playBtnIcColor.substring(5,7),16);var d=parseInt(cb.playBtnBgColor.substring(1,3),16);var e=parseInt(cb.playBtnBgColor.substring(3,5),16);var f=parseInt(cb.playBtnBgColor.substring(5,7),16);Tween.get(S,{override:true}).to({playBtnBgRed:a,playBtnBgGreen:b,playBtnBgBlue:c,playBtnIcRed:d,playBtnIcGreen:e,playBtnIcBlue:f},500,Ease.cubicOut)}function Bb(){$(bb).css("cursor","default");var a=parseInt(cb.playBtnBgColor.substring(1,3),16);var b=parseInt(cb.playBtnBgColor.substring(3,5),16);var c=parseInt(cb.playBtnBgColor.substring(5,7),16);var d=parseInt(cb.playBtnIcColor.substring(1,3),16);var e=parseInt(cb.playBtnIcColor.substring(3,5),16);var f=parseInt(cb.playBtnIcColor.substring(5,7),16);Tween.get(S,{override:true}).to({playBtnBgRed:a,playBtnBgGreen:b,playBtnBgBlue:c,playBtnIcRed:d,playBtnIcGreen:e,playBtnIcBlue:f},500,Ease.cubicOut)}function Cb(){$(bb).css("cursor","pointer");var a=parseInt(cb.scrollbarHandlerColor.substring(1,3),16);var b=parseInt(cb.scrollbarHandlerColor.substring(3,5),16);var c=parseInt(cb.scrollbarHandlerColor.substring(5,7),16);var d=parseInt(cb.scrollbarTrackColor.substring(1,3),16);var e=parseInt(cb.scrollbarTrackColor.substring(3,5),16);var f=parseInt(cb.scrollbarTrackColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}function Db(){$(bb).css("cursor","default");if(!h){var a=parseInt(cb.scrollbarTrackColor.substring(1,3),16);var b=parseInt(cb.scrollbarTrackColor.substring(3,5),16);var c=parseInt(cb.scrollbarTrackColor.substring(5,7),16);var d=parseInt(cb.scrollbarHandlerColor.substring(1,3),16);var e=parseInt(cb.scrollbarHandlerColor.substring(3,5),16);var f=parseInt(cb.scrollbarHandlerColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}}function Eb(a){h=true;z=a.stageX-v.handler.x-v.x;s.onMouseUp=Fb}function Fb(){h=false;s.onMouseUp=null;v.gotoItem(j);var a=parseInt(cb.scrollbarTrackColor.substring(1,3),16);var b=parseInt(cb.scrollbarTrackColor.substring(3,5),16);var c=parseInt(cb.scrollbarTrackColor.substring(5,7),16);var d=parseInt(cb.scrollbarHandlerColor.substring(1,3),16);var e=parseInt(cb.scrollbarHandlerColor.substring(3,5),16);var f=parseInt(cb.scrollbarHandlerColor.substring(5,7),16);Tween.get(v,{override:true}).to({trackRed:a,trackGreen:b,trackBlue:c,handlerRed:d,handlerGreen:e,handlerBlue:f},500,Ease.cubicOut)}function Gb(){if(l==r){Ib();return}Z=new Image;Z.src=q[l].imagePath;Z.onload=Hb}function Hb(){var b=new Bitmap(Z);q[l].setImage(b,cb,a);l++;Gb()}function Ib(){s.removeChild(u);d=true;var a=0;for(var b=0;b<r;b++){ab=q[b];ab.container.id=ab.id;ab.container.regX=ab.width/2;ab.container.regY=ab.height/2;ab.angle=b/r*360+90;ab.container.scaleX=0;ab.container.scaleY=0;ab.container.alpha=0;ab.container.positionZ=cb.radiusZ*Math.sin(Math.PI/180*ab.angle)-cb.radiusZ;var c=i/(i-ab.container.positionZ);ab.container.x=cb.radiusX*Math.cos(Math.PI/180*ab.angle);ab.container.y=cb.radiusY*Math.sin(Math.PI/180*ab.angle)*c;var f=m/ab.width*c;var g=n/ab.height*c;var h=1-ab.container.positionZ/(-cb.radiusZ*2)*(1-cb.backThumbTransparency);if(b!=r-1){Tween.get(ab.container).wait(a).to({scaleX:f,scaleY:g,alpha:h},1e3,Ease.cubicOut)}else{Tween.get(ab.container).wait(a).to({scaleX:f,scaleY:g,alpha:h},1e3,Ease.cubicOut).call(function(){e=true;qb()})}ab.container.rotation=-y;t.addChild(ab.container);ab.container.onMouseOver=Kb;ab.container.onMouseOut=Lb;ab.container.onClick=Mb;a+=100}t.rotation=y;q[0].selected=true;t.sortChildren(function(a,b){return a.positionZ-b.positionZ})}function Jb(){$(bb).mousewheel(function(a,b){if(b>0){Nb(j+1)}else{Nb(j-1)}return false})}function Kb(a){$(bb).css("cursor","pointer");var b=a.target.id;if(b==j){if(cb.showTooltip){L.id=b;N.text=q[b].text;M.graphics=new Graphics;M.graphics.beginFill(cb.tooltipBgColor);M.graphics.drawRoundRect(0,0,N.getMeasuredWidth()+4,N.getMeasuredLineHeight()+8,4);M.graphics.moveTo((N.getMeasuredWidth()+4)/2-4,N.getMeasuredLineHeight()+8);M.graphics.lineTo((N.getMeasuredWidth()+4)/2,N.getMeasuredLineHeight()+16);M.graphics.lineTo((N.getMeasuredWidth()+4)/2+4,N.getMeasuredLineHeight()+8);M.graphics.endFill();M.y=-(N.getMeasuredLineHeight()+4)/2;N.x=2;N.y=N.getMeasuredLineHeight()/2;Tween.get(L,{override:true}).to({alpha:1},400,Ease.cubicOut)}Tween.get(K,{override:true}).to({redOffset:50,greenOffset:50,blueOffset:50},600,Ease.cubicOut)}}function Lb(a){$(bb).css("cursor","default");var b=a.target.id;if(b==j){if(cb.showTooltip){Tween.get(L,{override:true}).to({alpha:0},400,Ease.cubicOut)}Tween.get(K,{override:true}).to({redOffset:0,greenOffset:0,blueOffset:0},600,Ease.cubicOut)}}function Mb(a){var b=a.target.id;if(e&&!E){if(b!=j){Nb(b)}else{if(cb.allowUrlClick)window.open(q[b].url,cb.windowLocation)}}}function Nb(a){k=j;if(g){clearTimeout(x);Tween.get(J,{override:true}).to({transPercent:0},1e3,Ease.cubicOut);Tween.get(this).wait(1e3).call(tb)}if(a<0)j=a+r;else j=a%r;if(cb.showScrollbar&&!h){v.gotoItem(j)}Pb();K.redOffset=1;K.greenOffset=1;K.blueOffset=1}function Ob(a){while(a<0)a+=360;return a}function Pb(){var a;var b=Ob(q[j].angle)%360;if(b>=90&&b<=270){a=90-b}else if(b>270){a=180-(b-270)}else{a=90-b}for(var c=0;c<r;c++){ab=q[c];var d=ab.angle+a;if(c==j){ab.selected=true}else{ab.selected=false}Tween.get(ab,{override:true}).to({angle:d},1e3,Ease.cubicOut)}}function Qb(){if(!d){u.rotation+=10}if(g){w.fillPreloader(J.transPercent/100)}}function Rb(){if(e){for(var a=0;a<r;a++){ab=q[a];ab.container.positionZ=cb.radiusZ*Math.sin(Math.PI/180*ab.angle)-cb.radiusZ;var b=i/(i-ab.container.positionZ);ab.container.x=cb.radiusX*Math.cos(Math.PI/180*ab.angle);ab.container.y=cb.radiusY*Math.sin(Math.PI/180*ab.angle)*b;ab.container.scaleX=m/ab.width*b;ab.container.scaleY=n/ab.height*b;ab.container.alpha=1-ab.container.positionZ/(-cb.radiusZ*2)*(1-cb.backThumbTransparency);if(cb.allowUrlClick){if(a==j){if(!$.browser.opera){var c=new ColorFilter(1,1,1,1,K.redOffset,K.greenOffset,K.blueOffset,1);ab.imgContainer.filters=[c];ab.imgContainer.updateCache()}}else{if(!$.browser.opera){ab.imgContainer.filters=null;ab.imgContainer.updateCache()}}}}t.sortChildren(function(a,b){return a.positionZ-b.positionZ})}}function Sb(){if(f){if(cb.showPrevBtn){ob(R.getChildAt(0),R.prevBtnBgRed,R.prevBtnBgGreen,R.prevBtnBgBlue);ob(R.getChildAt(1),R.prevBtnIcRed,R.prevBtnIcGreen,R.prevBtnIcBlue)}if(cb.showNextBtn){ob(Q.getChildAt(0),Q.nextBtnBgRed,Q.nextBtnBgGreen,Q.nextBtnBgBlue);ob(Q.getChildAt(1),Q.nextBtnIcRed,Q.nextBtnIcGreen,Q.nextBtnIcBlue)}if(cb.showPlayBtn){ob(S.getChildAt(0),S.playBtnBgRed,S.playBtnBgGreen,S.playBtnBgBlue);ob(S.getChildAt(1),S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue);ob(S.getChildAt(2),S.playBtnIcRed,S.playBtnIcGreen,S.playBtnIcBlue)}if(cb.showScrollbar){pb(v.trackRed,v.trackGreen,v.trackBlue,v.handlerRed,v.handlerGreen,v.handlerBlue)}}}function Tb(){if(F){for(var a=0;a<r;a++){ab=q[a];ab.angle+=I}if(I>0)I-=1;else I+=1;if(Math.abs(I)<2){F=false;ib()}}}var c=this;var d=false;var e=false;var f=false;var g=false;var h=false;var i=250;var j=0;var k=-1;var l=0;var m;var n;var o;var p;var q;var r;var s;var t;var u;var v;var w;var x;var y;var z;var A;var B;var C;var D=false;var E=false;var F=false;var G=false;var H=0;var I=0;var J=new Object;J.transPercent=0;var K=new Object;K.redOffset=0;K.greenOffset=0;K.blueOffset=0;var L;var M;var N;var O;var P;var Q=new Container;var R=new Container;var S=new Container;var T=new Image;var U=new Image;var V=new Image;var W=new Image;var X=new Image;var Y=new Image;var Z=new Image;var _=new Image;var ab;var bb=$("#"+a)[0];if(!bb){alert("Invalid canvas id: "+a)}var cb=new Data(b);$(cb).bind("loaded",db);this.tick=function(){Qb();Rb();Sb();Tb();s.update()}}function Data(a){function c(a){b.canvasWidth=$(a).find("canvas_width").text();b.canvasHeight=$(a).find("canvas_height").text();b.centerX=$(a).find("carousel_center_x_offset").text();b.centerY=$(a).find("carousel_center_y_offset").text();b.radiusX=$(a).find("radius_x").text();b.radiusY=$(a).find("radius_y").text();b.radiusZ=$(a).find("radius_z").text();b.carouselAngle=$(a).find("carousel_rotation_angle").text();b.backThumbTransparency=$(a).find("back_thumb_transparency").text();b.backgroundColor=$(a).find("background_color").text();if($(a).find("auto_play").text()=="yes")b.autoplay=true;else b.autoplay=false;if($(a).find("enable_mouse_wheel").text()=="yes")b.mousewheel=true;else b.mousewheel=false;b.slideshowDelay=parseFloat($(a).find("slideshow_delay").text())*1e3;b.preloaderPath=$(a).find("preloader_path").text();b.preloaderSize=$(a).find("preloader_size").text();b.preloaderColor=$(a).find("preloader_color").text();b.buttonsBackgroundPath=$(a).find("buttons_background_path").text();b.buttonsNextIconPath=$(a).find("buttons_next_icon_path").text();b.buttonsPrevIconPath=$(a).find("buttons_prev_icon_path").text();b.buttonsPlayIconPath=$(a).find("buttons_play_icon_path").text();b.buttonsPauseIconPath=$(a).find("buttons_pause_icon_path").text();if($(a).find("show_next_button").text()=="yes")b.showNextBtn=true;else b.showNextBtn=false;if($(a).find("show_prev_button").text()=="yes")b.showPrevBtn=true;else b.showPrevBtn=false;if($(a).find("show_play_button").text()=="yes")b.showPlayBtn=true;else b.showPlayBtn=false;b.nextButtonPosX=$(a).find("next_button_x_position").text();b.nextButtonPosY=$(a).find("next_button_y_position").text();b.prevButtonPosX=$(a).find("prev_button_x_position").text();b.prevButtonPosY=$(a).find("prev_button_y_position").text();b.playButtonPosX=$(a).find("play_button_x_position").text();b.playButtonPosY=$(a).find("play_button_y_position").text();b.nextBtnBgColor=$(a).find("next_button_background_color").text();b.nextBtnIcColor=$(a).find("next_button_icon_color").text();b.prevBtnBgColor=$(a).find("prev_button_background_color").text();b.prevBtnIcColor=$(a).find("prev_button_icon_color").text();b.playBtnBgColor=$(a).find("play_button_background_color").text();b.playBtnIcColor=$(a).find("play_button_icon_color").text();if($(a).find("show_scrollbar").text()=="yes")b.showScrollbar=true;else b.showScrollbar=false;b.scrollbarPosX=parseInt($(a).find("scrollbar_x_position").text());b.scrollbarPosY=parseInt($(a).find("scrollbar_y_position").text());b.scrollbarWidth=$(a).find("scrollbar_width").text();b.scrollbarHeight=$(a).find("scrollbar_height").text();b.scrollbarHandlerWidth=$(a).find("scrollbar_handler_width").text();b.scrollbarHandlerColor=$(a).find("scrollbar_handler_color").text();b.scrollbarTrackColor=$(a).find("scrollbar_track_bar_color").text();b.scrollbarLinesPath=$(a).find("scrollbar_lines_image_path").text();b.thumbWidth=$(a).find("image_width").text();b.thumbHeight=$(a).find("image_height").text();b.borderSize=parseInt($(a).find("border_size").text());b.borderColor=$(a).find("border_color").text();if($(a).find("show_tooltip").text()=="yes")b.showTooltip=true;else b.showTooltip=false;b.tooltipFont=$(a).find("tooltip_font").text();b.tooltipTextSize=$(a).find("tooltip_text_size").text();b.tooltipTextColor=$(a).find("tooltip_text_color").text();b.tooltipBgColor=$(a).find("tooltip_background_color").text();if($(a).find("open_link_on_image_click").text()=="yes")b.allowUrlClick=true;else b.allowUrlClick=false;b.windowLocation=$(a).find("window_open_location").text();if($(a).find("show_reflection").text()=="yes")b.showReflection=true;else b.showReflection=false;b.reflHeight=parseInt($(a).find("reflection_height").text());b.reflDistance=parseInt($(a).find("reflection_distance").text());b.reflTransparency=$(a).find("reflection_transparency").text();b.transPrelPosX=$(a).find("slide_show_preloader_x_position").text();b.transPrelPosY=$(a).find("slide_show_preloader_y_position").text();b.transPrelSize=$(a).find("slide_show_preloader_size").text();b.transPrelBgColor=$(a).find("slide_show_preloader_background_color").text();b.transPrelFillColor=$(a).find("slide_show_preloader_fill_color").text();$(a).find("image").each(function(){var a=b.nrImages++;var c=new Thumb(a,$(this).find("image_path").text(),$(this).find("text").text(),$(this).find("url_to_open_on_click").text());b.thumbsAr[a]=c});$(b).trigger("loaded")}var b=this;b.nrImages=0;b.thumbsAr=new Array;$.ajax({type:"GET",url:a,dataType:"xml",success:c,error:function(a,b){alert("Error with the xml file: "+b)}})}function Thumb(a,b,c,d){this.id=a;this.imagePath=b;this.text=c;this.url=d;this.angle=0;this.positionZ=0;this.selected=false;this.posterPath=null;this.container=new Container;this.imgContainer=new Container;this.setImage=function(a,b,c){var d=a.image.width;var e=a.image.height;var f=b.borderSize;var g=new Shape;g.graphics=new Graphics;g.graphics.beginFill(b.borderColor);g.graphics.drawRect(0,0,d+f*2,e+f*2);g.cache(0,0,d+f*2,e+f*2);if(f>0)this.imgContainer.addChild(g);a.x=f;a.y=f;this.imgContainer.addChild(a);this.container.addChild(this.imgContainer);this.imgContainer.cache(0,0,d+f*2,e+f*2);var h=b.reflHeight;h*=e/b.thumbHeight;h+=f;$("#"+c).prepend("<canvas id='carouselReflCanvas'></canvas>");var i=$("#carouselReflCanvas");$(i).attr({width:d+f*2,height:h});ctx=i[0].getContext("2d");ctx.save();ctx.translate(0,e+f*2-1);ctx.scale(1,-1);ctx.drawImage(this.imgContainer.cacheCanvas,0,0,d+f*2,e+f*2);ctx.restore();ctx.globalCompositeOperation="destination-out";gradient=ctx.createLinearGradient(0,0,0,h);gradient.addColorStop(0,"rgba(255, 255, 255, "+(1-b.reflTransparency)+")");gradient.addColorStop(1,"rgba(255, 255, 255, 1.0)");ctx.fillStyle=gradient;ctx.fillRect(0,0,d+f*2,h);var j=new Bitmap(i[0]);this.container.addChild(j);j.y=e+f*2+b.reflDistance;$("#carouselReflCanvas").remove();if(!b.showReflection){j.visible=false}else{this.imgContainer.cache(0,0,d+f*2,e+f*2+h+b.reflDistance)}this.width=a.image.width+f*2;this.height=a.image.height+f*2;this.imageWidth=this.width;this.imageHeight=this.height}}function TransitionPreloader(a){this.x=a.transPrelPosX;this.y=a.transPrelPosY;this.size=a.transPrelSize;this.bgColor=a.transPrelBgColor;this.fillColor=a.transPrelFillColor;this.rotation=-90;this.fillPreloader=function(a){var b=Math.PI*2*a;this.graphics=new Graphics;this.graphics.beginFill(this.bgColor);this.graphics.drawCircle(0,0,this.size/2);this.graphics.endFill();this.graphics.beginFill(this.fillColor);this.graphics.lineTo(this.size/2,0);this.graphics.arc(0,0,this.size/2,0,b,false);this.graphics.lineTo(0,0);this.graphics.endFill()}}function ScrollBar(a,b){this.x=a.scrollbarPosX;this.y=a.scrollbarPosY;this.width=a.scrollbarWidth;this.height=a.scrollbarHeight;this.trackColor=a.scrollbarTrackColor;this.handlerColor=a.scrollbarHandlerColor;this.nrItems=a.nrImages;this.handlerWidth=a.scrollbarHandlerWidth;this.unitWidth=(this.width-this.handlerWidth)/(this.nrItems-1);this.track=new Shape;this.handler=new Container;this.handlerBar=new Shape;this.addChild(this.track);this.addChild(this.handler);this.track.graphics=new Graphics;this.track.graphics.beginFill("#FFFFFF");this.track.graphics.drawRect(0,0,this.width,this.height);this.track.graphics.endFill();this.handlerBar.graphics=new Graphics;this.handlerBar.graphics.beginFill("#FFFFFF");this.handlerBar.graphics.drawRect(0,0,this.handlerWidth,this.height);this.handlerBar.graphics.endFill();this.lines=new Bitmap(b);this.lines.regX=Math.floor(this.lines.image.width/2);this.lines.regY=Math.floor(this.lines.image.height/2);var c=this.height/this.lines.image.height;this.lines.scaleX=c;this.lines.scaleY=c;this.handler.addChild(this.handlerBar);this.handler.addChild(this.lines);this.lines.x=Math.floor(this.handlerWidth/2);this.lines.y=Math.floor(this.height/2);this.track.cache(0,0,this.width,this.height);this.handlerBar.cache(0,0,this.handlerWidth,this.height);this.lines.cache(0,0,this.lines.image.width,this.lines.image.height);this.gotoItem=function(a){Tween.get(this.handler,{override:true}).to({x:Math.floor(a*this.unitWidth)},1e3,Ease.cubicOut)}}TransitionPreloader.prototype=new Shape;TransitionPreloader.prototype.constructor=TransitionPreloader;ScrollBar.prototype=new Container;ScrollBar.prototype.constructor=ScrollBar